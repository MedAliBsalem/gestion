<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  {% block stylesheets %}
    {{ encore_entry_link_tags('app') }}
  {% endblock %}
</head>
<body class="font-sans">
    <main class="relative h-screen overflow-hidden bg-gray-100">
        <div class="flex items-start justify-between">
            <div class="relative hidden h-screen shadow-lg lg:block w-80">
                <div class="h-full bg-white ">
                    <div class="flex items-center justify-start pt-6 ml-8">
                        <p class="text-xl font-bold ">
                            Plannifer
                        </p>
                    </div>
                    <nav class="mt-6">
                        <div>
                            <a class="flex items-center justify-start w-full p-2 pl-6 my-2 text-sky-950 transition-colors duration-200 border-l-4 border-sky-500 hover:bg-sky-100"
                                href="{{ path('sec_dashboard') }}">
                                <span class="text-left">
                                    <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Iconly/Light/Category" stroke="#000000" stroke-width="1.5" fill="none"
                                            fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round">
                                            <g id="Category" transform="translate(2.999141, 3.000000)" stroke="#000000"
                                                stroke-width="1.5">
                                                <path
                                                    d="M0.000858865205,3.5 C0.000858865205,0.874787053 0.0289681101,0 3.50085887,0 C6.9727494,0 7.00085887,0.874787053 7.00085887,3.5 C7.00085887,6.12521295 7.01193168,7 3.50085887,7 C-0.010214169,7 0.000858865205,6.12521295 0.000858865205,3.5 Z"
                                                    id="Stroke-1"></path>
                                                <path
                                                    d="M11.0008589,3.5 C11.0008589,0.874787053 11.0289681,0 14.5008589,0 C17.9727494,0 18.0008589,0.874787053 18.0008589,3.5 C18.0008589,6.12521295 18.0119317,7 14.5008589,7 C10.9897858,7 11.0008589,6.12521295 11.0008589,3.5 Z"
                                                    id="Stroke-3"></path>
                                                <path
                                                    d="M0.000858865205,14.5 C0.000858865205,11.8747871 0.0289681101,11 3.50085887,11 C6.9727494,11 7.00085887,11.8747871 7.00085887,14.5 C7.00085887,17.1252129 7.01193168,18 3.50085887,18 C-0.010214169,18 0.000858865205,17.1252129 0.000858865205,14.5 Z"
                                                    id="Stroke-5"></path>
                                                <path
                                                    d="M11.0008589,14.5 C11.0008589,11.8747871 11.0289681,11 14.5008589,11 C17.9727494,11 18.0008589,11.8747871 18.0008589,14.5 C18.0008589,17.1252129 18.0119317,18 14.5008589,18 C10.9897858,18 11.0008589,17.1252129 11.0008589,14.5 Z"
                                                    id="Stroke-7"></path>
                                            </g>
                                        </g>
                                    </svg>
                                </span>
                                <span class="mx-4 text-sm font-normal">
                                    Tableau de bord
                                </span>
                            </a>
                            <a class="flex items-center justify-start w-full p-2 pl-6 my-2 text-gray-400 transition-colors duration-200 border-l-4 border-transparent hover:bg-sky-100"
                                href="{{ path('listRdv') }}">
                                <span class="text-left">
                                    <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Iconly/Light/Time-Circle" stroke="#000000" stroke-width="1.5" fill="none"
                                            fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round">
                                            <g id="Time-Circle" transform="translate(2.000000, 2.000000)"
                                                stroke="#000000" stroke-width="1.5">
                                                <path
                                                    d="M19.2498,10.0005 C19.2498,15.1095 15.1088,19.2505 9.9998,19.2505 C4.8908,19.2505 0.7498,15.1095 0.7498,10.0005 C0.7498,4.8915 4.8908,0.7505 9.9998,0.7505 C15.1088,0.7505 19.2498,4.8915 19.2498,10.0005 Z"
                                                    id="Stroke-1"></path>
                                                <polyline id="Stroke-3"
                                                    points="13.4314 12.9429 9.6614 10.6939 9.6614 5.8469"></polyline>
                                            </g>
                                        </g>
                                    </svg>
                                </span>
                                <span class="mx-4 text-sm font-normal">
                                    Liste des rendez-vous
                                </span>
                            </a>
                            <a class="flex items-center justify-start w-full p-2 pl-6 my-2 text-gray-400 transition-colors duration-200 border-l-4 border-transparent hover:bg-sky-100"
                                href="{{ path('listPat') }}">
                                <span class="text-left">
                                    <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Iconly/Light/Folder" stroke="#000000" stroke-width="1.5" fill="none"
                                            fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round">
                                            <g id="Folder" transform="translate(1.500000, 1.500000)" stroke="#000000"
                                                stroke-width="1.5">
                                                <path
                                                    d="M19.9189,14.2321 C19.9189,17.8101 17.8099,19.9191 14.2319,19.9191 L6.4499,19.9191 C2.8629,19.9191 0.7499,17.8101 0.7499,14.2321 L0.7499,6.4321 C0.7499,2.8591 2.0639,0.7501 5.6429,0.7501 L7.6429,0.7501 C8.3609,0.7511 9.0369,1.0881 9.4669,1.6631 L10.3799,2.8771 C10.8119,3.4511 11.4879,3.7891 12.2059,3.7901 L15.0359,3.7901 C18.6229,3.7901 19.9469,5.6161 19.9469,9.2671 L19.9189,14.2321 Z"
                                                    id="Stroke-1"></path>
                                                <line x1="5.981" y1="12.963" x2="14.716" y2="12.963" id="Stroke-3">
                                                </line>
                                            </g>
                                        </g>
                                    </svg>
                                </span>
                                <span class="mx-4 text-sm font-normal">
                                    Liste des patients
                                </span>
                            </a>
                            <a class="flex items-center justify-start w-full p-2 pl-6 my-2 text-gray-400 transition-colors duration-200 border-l-4 border-transparent hover:bg-sky-100"
                                href="{{ path('app_logout') }}">
                                <span class="text-left">
                                    <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Iconly/Light/Logout" stroke="#000000" stroke-width="1.5" fill="none"
                                            fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round">
                                            <g id="Logout" transform="translate(2.000000, 2.000000)" stroke="#000000"
                                                stroke-width="1.5">
                                                <path
                                                    d="M13.016,5.3895 L13.016,4.4565 C13.016,2.4215 11.366,0.7715 9.331,0.7715 L4.456,0.7715 C2.422,0.7715 0.772,2.4215 0.772,4.4565 L0.772,15.5865 C0.772,17.6215 2.422,19.2715 4.456,19.2715 L9.341,19.2715 C11.37,19.2715 13.016,17.6265 13.016,15.5975 L13.016,14.6545"
                                                    id="Stroke-1"></path>
                                                <line x1="19.8095" y1="10.0214" x2="7.7685" y2="10.0214" id="Stroke-3">
                                                </line>
                                                <polyline id="Stroke-5"
                                                    points="16.8812 7.1063 19.8092 10.0213 16.8812 12.9373"></polyline>
                                            </g>
                                        </g>
                                    </svg>
                                </span>
                                <span  class="mx-4 text-sm font-normal">
                                    
                                    Déconnexion
                                    
                                 </span>
                            </a>
                        </div>
                    </nav>
                </div>
            </div>
            <div class="flex flex-col w-full md:space-y-4">
                <header class="z-40 flex items-center justify-between w-full h-16">
                    <div class="block ml-6 lg:hidden">
                        <button class="flex items-center p-2 text-gray-500 bg-white rounded-full shadow text-md">
                            <svg width="20" height="20" class="text-gray-400" fill="currentColor"
                                viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M1664 1344v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45z">
                                </path>
                            </svg>
                        </button>
                    </div>
                    <div class="relative z-20 flex flex-col justify-end h-full px-3 md:w-full">
                        <div class="relative flex items-center justify-end w-full p-1 space-x-4">
                            <button class="flex items-center text-sky-800 font-bold text-md">
                                    Linda
                            </button>
                            <a href="#" class="relative block">
                                <img alt="profil" src="{{ asset('images/femme.jpg') }}"
                                    class="mx-auto object-cover rounded-full h-10 w-10 " />
                            </a>
                        </div>
                    </div>
                </header>
                <div class="h-screen px-4 pb-24 overflow-auto md:px-6">
                    <h1 class="text-4xl font-bold text-sky-950">
                        Bonjour, Linda
                    </h1>
                    <h2 class="text-gray-400 text-md">
                        Résumé de tableau de bord
                    </h2>
                    <div class="flex flex-col items-center w-full my-6 space-y-4 md:space-x-4 md:space-y-0 md:flex-row">
                        <div class="w-full md:w-6/12">
                            <div class="relative w-full overflow-hidden bg-white shadow-lg rounded-lg">
                                <div class="flex items-center justify-between px-4 py-6 space-x-4">
                                    <div class="flex items-center">
                                        <span class="relative p-5 bg-amber-500 rounded-full">
                                            <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1"
                                                xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink">
                                                <g id="Iconly/Light/Profile" stroke="#ffffff" stroke-width="1.5"
                                                    fill="none" fill-rule="evenodd" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <g id="Profile" transform="translate(4.814286, 2.814476)"
                                                        stroke="#ffffff">
                                                        <path
                                                            d="M7.17047619,12.531714 C3.30285714,12.531714 -4.08562073e-14,13.1164759 -4.08562073e-14,15.4583807 C-4.08562073e-14,17.8002854 3.28190476,18.4059997 7.17047619,18.4059997 C11.0380952,18.4059997 14.34,17.8202854 14.34,15.479333 C14.34,13.1383807 11.0590476,12.531714 7.17047619,12.531714 Z"
                                                            id="Stroke-1" stroke-width="2"></path>
                                                        <path
                                                            d="M7.17047634,9.19142857 C9.70857158,9.19142857 11.7657144,7.13333333 11.7657144,4.5952381 C11.7657144,2.05714286 9.70857158,-5.32907052e-15 7.17047634,-5.32907052e-15 C4.6323811,-5.32907052e-15 2.574259,2.05714286 2.574259,4.5952381 C2.56571443,7.1247619 4.60952396,9.18285714 7.13809539,9.19142857 L7.17047634,9.19142857 Z"
                                                            id="Stroke-3" stroke-width="2"></path>
                                                    </g>
                                                </g>
                                            </svg>
                                        </span>
                                        <p class="ml-2 text-sm font-semibold text-sky-950">
                                            Moyenne des patients par jours
                                        </p>
                                    </div>
                                    <div class="mt-6 text-xl font-bold text-sky-950 md:mt-0 ">
                                        30
                                        <span class="text-xs text-gray-400">
                                            /j
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center w-full space-x-4 md:w-1/2">
                            <div class="w-1/2">
                                <div class="relative w-full px-4 py-6 bg-white shadow-lg rounded-lg">
                                    <div class="flex items-center">
                                        <span class="relative p-5 bg-sky-400 rounded-full">
                                            <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1"
                                                xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink">
                                                <g id="Iconly/Light/3-User" stroke="#ffffff" stroke-width="1.5"
                                                    fill="none" fill-rule="evenodd" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <g id="3-User" transform="translate(1.000000, 3.500000)"
                                                        stroke="#ffffff" stroke-width="2">
                                                        <path
                                                            d="M16.8877,7.3967 C18.2827,7.2007 19.3567,6.0047 19.3597,4.5557 C19.3597,3.1277 18.3187,1.9437 16.9537,1.7197"
                                                            id="Stroke-1"></path>
                                                        <path
                                                            d="M18.7285,10.7503 C20.0795,10.9523 21.0225,11.4253 21.0225,12.4003 C21.0225,13.0713 20.5785,13.5073 19.8605,13.7813"
                                                            id="Stroke-3"></path>
                                                        <path
                                                            d="M10.8867,11.1638 C7.6727,11.1638 4.9277,11.6508 4.9277,13.5958 C4.9277,15.5398 7.6557,16.0408 10.8867,16.0408 C14.1007,16.0408 16.8447,15.5588 16.8447,13.6128 C16.8447,11.6668 14.1177,11.1638 10.8867,11.1638 Z"
                                                            id="Stroke-5"></path>
                                                        <path
                                                            d="M10.8867,8.3879 C12.9957,8.3879 14.7057,6.6789 14.7057,4.5689 C14.7057,2.4599 12.9957,0.7499 10.8867,0.7499 C8.7777,0.7499 7.06767183,2.4599 7.06767183,4.5689 C7.0597,6.6709 8.7567,8.3809 10.8587,8.3879 L10.8867,8.3879 Z"
                                                            id="Stroke-7"></path>
                                                        <path
                                                            d="M4.8848,7.3967 C3.4888,7.2007 2.4158,6.0047 2.4128,4.5557 C2.4128,3.1277 3.4538,1.9437 4.8188,1.7197"
                                                            id="Stroke-9"></path>
                                                        <path
                                                            d="M3.0439,10.7503 C1.6929,10.9523 0.7499,11.4253 0.7499,12.4003 C0.7499,13.0713 1.1939,13.5073 1.9119,13.7813"
                                                            id="Stroke-11"></path>
                                                    </g>
                                                </g>
                                            </svg>
                                        </span>
                                        <p class="ml-2 text-sm font-semibold text-sky-950">
                                            Nombre des patients : {{ userCount }}
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="w-1/2">
                                <div class="relative w-full px-4 py-6 bg-white shadow-lg rounded-lg">
                                    <div class="flex items-center">
                                        <span class="relative p-5 bg-emerald-100 rounded-full">
                                            <svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1"
                                                xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink">
                                                <g id="Iconly/Light/Time-Circle" stroke="#3B8C66" stroke-width="1.5"
                                                    fill="none" fill-rule="evenodd" stroke-linecap="round"
                                                    stroke-linejoin="round">
                                                    <g id="Time-Circle" transform="translate(2.000000, 2.000000)"
                                                        stroke="#3B8C66" stroke-width="2">
                                                        <path
                                                            d="M19.2498,10.0005 C19.2498,15.1095 15.1088,19.2505 9.9998,19.2505 C4.8908,19.2505 0.7498,15.1095 0.7498,10.0005 C0.7498,4.8915 4.8908,0.7505 9.9998,0.7505 C15.1088,0.7505 19.2498,4.8915 19.2498,10.0005 Z"
                                                            id="Stroke-1"></path>
                                                        <polyline id="Stroke-3"
                                                            points="13.4314 12.9429 9.6614 10.6939 9.6614 5.8469">
                                                        </polyline>
                                                    </g>
                                                </g>
                                            </svg>
                                        </span>
                                        <p class="ml-2 text-sm font-semibold text-sky-950">
                                            Nombre des rendez-vous : {{ rdvCount }}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 gap-4 my-4 md:grid-cols-1 lg:grid-cols-1">
                        <div class="w-full">
                            <h1 class="text-lg font-bold pb-4 inline-block">Liste des patients</h1>
                            <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
                                <table class="w-full text-sm text-left text-gray-500 ">
                                    <thead class="text-xs text-sky-950 uppercase bg-gray-50">
                                        <tr>
                                            <th scope="col" class="p-4">
                                                <div class="flex items-center">
                                                    <input id="checkbox-all-search" type="checkbox"
                                                        class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500">
                                                    <label for="checkbox-all-search" class="sr-only">checkbox</label>
                                                </div>
                                            </th>
                                            <th scope="col" class="px-6 py-3">
                                                Id
                                            </th>
                                            <th scope="col" class="px-6 py-3">
                                                Nom & Prénom
                                            </th>
                                            <th scope="col" class="px-6 py-3">
                                                Numero de telephone
                                            </th>
                                            <th scope="col" class="px-6 py-3">
                                                Action
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    {% for user in u %}
                                        {% if "ROLE_SEC" not in user.roles and "ROLE_DOC" not in user.roles %}
                                        <tr class="bg-white border-b">
                                                                                        <td class="w-4 p-4">
                                                <div class="flex items-center">
                                                    <input id="checkbox-table-search-1" type="checkbox"
                                                        class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 ">
                                                    <label for="checkbox-table-search-1"
                                                        class="sr-only">checkbox</label>
                                                </div>
                                            </td>
                                               
                                            <th scope="row"
                                                class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                                                {{ user.id }}
                                            </th>
                                            <td class="px-6 py-4">
                                                {{ user.nom }}
                                                {{ user.prenom }}
                                            </td>
                                            <td class="px-6 py-4">
                                                {{ user.numTel }}
                                            </td>
                                            <td class="flex items-center px-6 py-4 space-x-3">
                                                <a href="{{ path('updatePat',{'id':user.id}) }}"
                                                    class="rounded-md py-1 px-2 bg-blue-100 font-medium text-blue-600 hover:bg-blue-200">Modifier</a>
                                                
                                                <a href="{{ path('removeUser',{'id':user.id}) }}"
                                                    class="rounded-md py-1 px-2 font-medium bg-red-100 text-red-600 hover:bg-red-200">Supprimer</a>
                                            </td>
                                        </tr>
                                        {%endif%}
                                    {% endfor %}    
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 gap-4 my-4 md:grid-cols-1 lg:grid-cols-1">
                        <div class="w-full">
                            <h1 class="text-lg font-bold pb-4 inline-block">Liste des rendez-vous</h1>
                            <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
                                <table class="w-full text-sm text-left text-gray-500">
                                    <thead class="text-xs text-sky-950 uppercase bg-gray-50">
                                        <tr>
                                            <th scope="col" class="px-6 py-3">
                                                IdRdv
                                            </th>
                                            <th scope="col" class="px-6 py-3">
                                                Nom & Prénom
                                            </th>
                                            <th scope="col" class="px-6 py-3">
                                                Date
                                            </th>
                                            <th scope="col" class="px-6 py-3">
                                                Heure
                                            </th>
                                            <th scope="col" class="px-6 py-3">
                                                Status
                                            </th>

                                            <th scope="col" class="px-6 py-3">
                                                Consulté
                                            </th>

                                        </tr>
                                    </thead>
                                    
                                    <tbody>
                                    {% for rdv in r %}
                                        <tr class="bg-white border-b">
                                            <th scope="row"
                                                class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                                                {{ rdv.id }}
                                            </th>
                                            <th scope="row"
                                                class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap">
                                                {{ rdv.patient.nom }}
                                                {{ rdv.patient.prenom }}
                                            </th>
                                            <td class="px-6 py-4">
                                                {{ rdv.date|date('Y-m-d') }}
                                            </td>
                                            <td class="px-6 py-4">
                                                {{ rdv.time|date('H:i:s') }}
                                            </td>
                                            <td class="flex items-center px-6 py-4 space-x-3">
                                                {%if not rdv.valid%}
                                                <a href="{{ path('makeValid', {'id': rdv.id}) }}"
                                                    class="rounded-md py-1 px-2 bg-emerald-100 font-medium text-emerald-600 hover:bg-green-200">
                                                    Confirmer</a>
                                                {%else%}
                                                <p
                                                    class="rounded-md py-1 px-2 font-medium text-emerald-600">
                                                    Confirmé</p>
                                                {%endif%}
                                                <a href="{{ path('delete_rdv', {'id': rdv.id}) }}"
                                                    class="rounded-md py-1 px-2 font-medium bg-red-100 text-red-600 hover:bg-red-200">Annuler</a>
                                            </td>

                                            
                                            <td class="px-6 py-4">
                                                {% if (rdv.consulted)%}
                                                    <svg aria-hidden="true" class="flex-shrink-0 w-5 h-5 text-green-600 " fill="currentColor"
                                                    viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                    <title>Check icon</title>
                                                    <path fill-rule="evenodd"
                                                        d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                                        clip-rule="evenodd"></path>
                                                    </svg>
                                                {%endif%}
                                            </td>


                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

</body>
</html>